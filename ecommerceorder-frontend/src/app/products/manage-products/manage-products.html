<div class="container mt-4">
    <h3>Manage Products</h3>
    <p class="text-danger">{{errorMessage}}</p>

    <!-- Add Product Form -->
    <div class="card p-3 mb-4">
        <h5>Add Product</h5>
        <form (ngSubmit)="addProduct()">
            <div class="row">
                <div class="col-md-3">
                    <input type="text" [(ngModel)]="newProduct.name" name="name" class="form-control" placeholder="Name"
                        required>
                </div>
                <div class="col-md-2">
                    <input type="number" [(ngModel)]="newProduct.price" name="price" class="form-control"
                        placeholder="Price" required min="0">
                </div>
                <div class="col-md-2">
                    <input type="number" [(ngModel)]="newProduct.stock_quantity" name="stock_quantity"
                        class="form-control" placeholder="Stock" required min="0">
                </div>
                <div class="col-md-3">
                    <input type="text" [(ngModel)]="newProduct.description" name="description" class="form-control"
                        placeholder="Description">
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-success w-100"
                        [disabled]="!newProduct.name || !newProduct.price">Add</button>
                </div>
            </div>
        </form>
    </div>

    <!-- Product List -->
    <table class="table table-striped table-hover">
        <thead>
            <tr>
                <th>ID</th>
                <th>Name</th>
                <th>Price</th>
                <th>Stock</th>
                <th>Description</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            <tr *ngFor="let product of products">
                <td>{{product.product_id}}</td>
                <td>{{product.name}}</td>
                <td>{{product.price}}</td>
                <td>{{product.stock_quantity}}</td>
                <td>{{product.description}}</td>
                <td>
                    <button class="btn btn-primary btn-sm me-2" (click)="startEdit(product)">Edit</button>
                    <button class="btn btn-danger btn-sm" (click)="deleteProduct(product.product_id!)">Delete</button>
                </td>
            </tr>
        </tbody>
    </table>

    <!-- Edit Product Form -->
    <div *ngIf="editProduct" class="card p-3 mt-4">
        <h5>Edit Product</h5>
        <form (ngSubmit)="saveEdit()">
            <div class="row">
                <div class="col-md-3">
                    <input type="text" [(ngModel)]="editProduct.name" name="editName" class="form-control" required>
                </div>
                <div class="col-md-2">
                    <input type="number" [(ngModel)]="editProduct.price" name="editPrice" class="form-control" required>
                </div>
                <div class="col-md-2">
                    <input type="number" [(ngModel)]="editProduct.stock_quantity" name="editStock" class="form-control"
                        required>
                </div>
                <div class="col-md-3">
                    <input type="text" [(ngModel)]="editProduct.description" name="editDescription"
                        class="form-control">
                </div>
                <div class="col-md-2">
                    <button type="submit" class="btn btn-success w-100">Save</button>
                </div>
            </div>
        </form>
    </div>
</div>